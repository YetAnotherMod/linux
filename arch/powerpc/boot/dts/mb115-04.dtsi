/*
*
* Device Tree Source for RCM MB115.04 extention board ( Video and audio output module )
*
*/
/ {

	// HDMI channel 0 for DRM drivers
	hdmi-out0 {
		compatible = "hdmi-connector";
		type = "a";

		port {
			hdmi_con0: endpoint {
				remote-endpoint = <&adv7513_0_out>;
			};
		};
	};

	// HDM channel 1 for DRM drivers
	hdmi-out1 {
		compatible = "hdmi-connector";
		type = "a";

		port {
			hdmi_con1: endpoint {
				remote-endpoint = <&adv7513_1_out>;
			};
		};
	};

	plb {
		lsif1 {
			i2c0: i2c@0x3C05A000 {
				status = "ok";

				// HDMI channel 0 for fbdev and v4l2 drivers
				// adv7513_0: adv7513@39 {
				// 	compatible = "rcm,rcm-adv7513";
				// 	reg = <0x39>;
				// };

				// HDMI channel 1 for fbdev and v4l2 drivers
				// adv7513_1: adv7513@3d {
				// 	compatible = "rcm,rcm-adv7513";
				// 	reg = <0x3D>;
				// };

				// HDMI channel 0 for DRM drivers
				hdmi@39 {
					compatible = "adi,adv7513";
					reg = <0x39>, <0x29>, <0x49>, <0x59>;
					reg-names = "main", "cec", "edid", "packet";

					adi,input-depth = <8>;
					adi,input-colorspace = "yuv444";
					adi,input-clock = "1x";
					adi,input-style = <1>;
					adi,input-justification = "evenly";

					ports {
						#address-cells = <1>;
						#size-cells = <0>;

						port@0 {
							reg = <0>;
							adv7513_0_in: endpoint {
								remote-endpoint = <&vdu_out_rgb0>;
							};
						};

						port@1 {
							reg = <1>;
							adv7513_0_out: endpoint {
								remote-endpoint = <&hdmi_con0>;
							};
						};
					};
				};

				// HDMI channel 1 for DRM drivers
				hdmi@3d {
					compatible = "adi,adv7513";
					reg = <0x3d>, <0x2d>, <0x6d>, <0x5d>;
					reg-names = "main", "cec", "edid", "packet";

					adi,input-depth = <8>;
					adi,input-colorspace = "yuv444";
					adi,input-clock = "1x";
					adi,input-style = <1>;
					adi,input-justification = "evenly";

					ports {
						#address-cells = <1>;
						#size-cells = <0>;

						port@0 {
							reg = <0>;
							adv7513_1_in: endpoint {
								remote-endpoint = <&vdu_out_rgb1>;
							};
						};

						port@1 {
							reg = <1>;
							adv7513_1_out: endpoint {
								remote-endpoint = <&hdmi_con1>;
							};
						};
					};
				};
			};
		};

		mms {
			i2s: i2s@0x39080000 {
				status = "ok";
			};
			i2s0: i2s@0 {
				status = "ok";
			};
			i2s1: i2s@1 {
				status = "ok";
			};
			i2s2: i2s@2 {
				status = "ok";
			};
			i2s3: i2s@3 {
				status = "ok";
			};
			spdif: spdif@0x39080000 {
				status = "ok";
			};
			audio_dma: audio_dma@0x38017000 {
				status = "ok";
			};

			sound {
				// status = "ok";
				compatible = "simple-audio-card";
				simple-audio-card,name = "RCM Audio";
				#address-cells = <1>;
				#size-cells = <0>;
				#sound-dai-cells = <0>;

				simple-audio-card,dai-link@0 { // I2S0 - cs4384_0
					reg = <0>;
					format = "i2s";
					cpu {
						sound-dai = <&i2s0>;
					};
					codec {
						sound-dai = <&cs4384 0>;
					};
				};
				simple-audio-card,dai-link@1 { // I2S1 - cs4384_1
					reg = <1>;
					format = "i2s";
					cpu {
						sound-dai = <&i2s1>;
					};
					codec {
						sound-dai = <&cs4384 1>;
					};
				};
				simple-audio-card,dai-link@2 { // I2S2 - cs4384_2
					reg = <2>;
					format = "i2s";
					cpu {
						sound-dai = <&i2s2>;
					};
					codec {
						sound-dai = <&cs4384 2>;
					};
				};
				simple-audio-card,dai-link@3 { // I2S3 - cs4384_3
					reg = <3>;
					format = "i2s";
					cpu {
						sound-dai = <&i2s3>;
					};
					codec {
						sound-dai = <&cs4384 3>;
					};
				};

				simple-audio-card,dai-link@4 { // spdif
					reg = <4>;
					cpu {
						sound-dai = <&spdif>;
					};
					codec {
						sound-dai = <&spdif_out>;
					};
				};
			};

			spdif_out: spdif-out {
				#sound-dai-cells = <0>;
				compatible = "linux,spdif-dit";
			};

			// HDMI channel 0 for old FB/V4L2 drivers (actually VDU index 1)
			// vdu0: vdu@0x38013000 {
			// 	status = "ok";
			// };

			// HDMI channel 1 for old FB/V4L2 drivers (actually VDU index 0)
			// vdu1: vdu@0x38011000 {
			// 	status = "ok";
			// };

			// HDMI channel 0 for DRM drivers (actually VDU index 1)
			vdu0_drm: vdu@38013000 {
				status = "ok";
				output-color-space = "yuv444";
				max-width = <1280>;
				max-height = <720>;
				ports {
					port@0 {
						vdu_out_rgb0: endpoint@0 {
							remote-endpoint = <&adv7513_0_in>;
						};
					};
				};
			};

			// HDMI channel 1 for DRM drivers (actually VDU index 0)
			vdu1_drm: vdu@38011000 {
				status = "ok";
				output-color-space = "yuv444";
				max-width = <1280>;
				max-height = <720>;
				ports {
					port@0 {
						vdu_out_rgb1: endpoint@0 {
							remote-endpoint = <&adv7513_1_in>;
						};
					};
				};
			};
		};
	};
};
