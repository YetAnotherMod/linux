/*
 * Device Tree Source for RCM BIVK mainboard
 *
 * This file is licensed under the terms of the GNU General Public
 * License version 2.  This program is licensed "as is" without
 * any warranty of any kind, whether express or implied.
 */

#include "1888bc048.dtsi"

/ {
	model = "RC-Module 1888BC048 (Basis) SoC";

	aliases {
		uart0 = &uart0;
		mmc0 = &mmc0;
		mmc1 = &mmc1;
	}; 

	chosen {
		stdout-path = &uart0;
	};

	// 1Gib at 0x80000000
	memory@80000000 {
		device_type = "memory";
		reg = <0x80000000 0x40000000>;
	};

	// 1Gib at 0xC0000000
	memory@C0000000 {
		device_type = "memory";
		reg = <0xC0000000 0x40000000>;
	};

	apbf0 {
		mgeth0: mgeth0@0x01014000 {
			status = "ok";
			phys = <&sgmiiphy>;
			phy-handle = <&phy0>;
			phy-mode = "sgmii";
		};

		mgeth1: mgeth1@0x01015000 {
			status = "ok";
			phys = <&sgmiiphy>;
			phy-handle = <&phy1>;
			phy-mode = "sgmii";
		};

		mgeth2: mgeth2@0x01016000 {
			status = "ok";
			phys = <&sgmiiphy>;
			phy-handle = <&phy2>;
			phy-mode = "sgmii";
		};

		mgeth3: mgeth3@0x01017000 {
			status = "ok";
			phys = <&sgmiiphy>;
			phy-handle = <&phy3>;
			phy-mode = "sgmii";
		};
	};

	apbs0 {
		thermal: thermal {
			status = "ok";
		};
	};

	apbs1 {
		spi@01040000 {
			status = "disable";
			cs-gpios = <&gpio0 5 0>;
			num-cs = <1>;

			spi_flash0@0 {
				compatible = "st,w25q32", "spi-flash";
				reg = <0>;
				spi-max-frequency = <1000000>;
				spi-cpol;
				spi-cpha;
			};
		};


		mmc0: mmc0@01042000 {
			status = "ok";
			cd-gpios = <&gpio0 3 0>; // GPIO0<3>
		};

		mmc1: mmc1@01043000 {
			status = "ok";
			cd-gpios = <&gpio0 4 0>; // GPIO0<4>
		};

		uart0: uart0@01044000 {
			status = "ok";
		};

		mdma_uart0: dma@01044100 {
			status = "ok";
		};

		uart1: uart1@01045000 {
			status = "ok";
		};

		mdma_uart1: dma@01045100 {
			status = "ok";
		};

		timer01@01048000 {
			status = "ok";
		};

		pcie@0x01058000 {
			status = "ok";

			sw@0 {
				pri-bus = <0x02>;
				dev-num = <0x01 0x02 0x03 0x04 0x05 0x06 0x07 0x08 0x09 0x0A 0x0B>;
				sec-bus = <0x03 0x04 0x05 0x06 0x07 0x08 0x09 0x0A 0x0B 0x0C 0x0D>;
				sub-bus = <0x03 0x04 0x05 0x06 0x07 0x08 0x09 0x0A 0x0B 0x0C 0x0D>; 
			};
		};
	};

	apbs2 {
		wd@0108f000 {
			status = "ok";
		};

		gpio0: gpio0@01088000 {
			status = "ok";
		};

		gpio1: gpio1@01089000 {
			status = "ok";
		};

		gpio2: gpio0@0108a000 {
			status = "ok";
		};

		gpio3: gpio0@0108b000 {
			status = "ok";
		};

		gpio4: gpio0@0108c000 {
			status = "ok";
		};

		mdio0: mdio0@0x01080000 {
			status = "ok";

			phy0: ethernet-phy@0 {
				reg = <0>;
			};
		};

		mdio1: mdio0@0x01081000 {
			status = "ok";

			phy1: ethernet-phy@0 {
				reg = <0>;
			};
		};

		mdio2: mdio0@0x01082000 {
			status = "ok";

			phy2: ethernet-phy@0 {
				reg = <0>;
			};
		};

		mdio3: mdio0@0x01083000 {
			status = "ok";

			phy3: ethernet-phy@0 {
				reg = <0>;
			};
		};

		sgmiiphy: sgmiphy@0x01086000 {
			status = "ok";
		};
	};

	axi32 {
		L2: l2-cache-controller@0x01106000 {
			status = "ok";
		};	
	};

	thermal-zones {
		cpu-thermal {
			polling-delay-passive = <0>;
			polling-delay =  <1000>;
			thermal-sensors = <&thermal>;

			trips {
				cpu-crit {
					temperature = <100000>;
					hysteresis = <0>;
					type = "critical";
				};
			};

			cooling-maps {
			};
		};
	};
};

